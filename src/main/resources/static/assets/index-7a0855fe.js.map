{"version":3,"file":"index-7a0855fe.js","sources":["../../src/layouts/components/SidebarItem/index.vue"],"sourcesContent":["<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'SidebarItem',\n})\n</script>\n<script lang=\"ts\" setup name=\"SidebarItem\">\r\n// import SidebarItem from './index.vue'\r\nimport { resolveRoutePath } from '@/utils'\r\nimport useSettingsStore from '@/store/modules/settings'\r\nimport type { Menu } from '#/global'\r\n\r\nconst props = defineProps({\r\n  item: {\r\n    type: Object as () => Menu.recordRaw,\r\n    required: true,\r\n  },\r\n  basePath: {\r\n    type: String,\r\n    default: '',\r\n  },\r\n})\r\n\r\nconst settingsStore = useSettingsStore()\r\n\r\nconst hasChildren = computed(() => {\r\n  let flag = true\r\n  if (props.item.children) {\r\n    if (props.item.children.every(item => item.meta?.sidebar === false)) {\r\n      flag = false\r\n    }\r\n  }\r\n  else {\r\n    flag = false\r\n  }\r\n  return flag\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div class=\"sidebar-item\">\r\n    <router-link v-if=\"!hasChildren\" v-slot=\"{ href, navigate, isActive, isExactActive }\" custom :to=\"resolveRoutePath(basePath, item.path)\">\r\n      <a :href=\"item.meta?.link ? item.meta.link : href\" :class=\"[isActive && 'router-link-active', isExactActive && 'router-link-exact-active']\" :target=\"item.meta?.link ? '_blank' : '_self'\" @click=\"navigate\">\r\n        <el-menu-item :title=\"item.meta?.title ?? '[ 无标题 ]'\" :index=\"resolveRoutePath(basePath, item.path || '')\">\r\n          <el-icon v-if=\"item.meta?.icon\" class=\"title-icon\">\r\n            <svg-icon :name=\"item.meta.icon\" />\r\n          </el-icon>\r\n          <span class=\"title\">{{ item.meta?.title ?? '[ 无标题 ]' }}</span>\r\n        </el-menu-item>\r\n      </a>\r\n    </router-link>\r\n    <el-sub-menu v-else :title=\"item.meta?.title ?? '[ 无标题 ]'\" :index=\"settingsStore.settings.app.routeBaseOn !== 'filesystem' ? resolveRoutePath(basePath, item.path) : JSON.stringify(item)\">\r\n      <template #title>\r\n        <el-icon v-if=\"item.meta?.icon\" class=\"title-icon\">\r\n          <svg-icon :name=\"item.meta.icon\" />\r\n        </el-icon>\r\n        <span class=\"title\">{{ item.meta?.title ?? '[ 无标题 ]' }}</span>\r\n      </template>\r\n      <template v-for=\"route in item.children\">\r\n        <SidebarItem v-if=\"route.meta?.sidebar !== false\" :key=\"route.path\" :item=\"route\" :base-path=\"resolveRoutePath(basePath, item.path)\" />\r\n      </template>\r\n    </el-sub-menu>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n:deep(.el-menu-item),\r\n:deep(.el-menu-item span.title),\r\n:deep(.el-sub-menu__title),\r\n:deep(.el-sub-menu__title span.title) {\r\n  flex: 1;\r\n  vertical-align: inherit;\r\n\r\n  @include text-overflow;\r\n}\r\n\r\n:deep(.el-menu-item) {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n:deep(.el-sub-menu),\r\n:deep(.el-menu-item) {\r\n  .title-icon {\r\n    width: 20px;\r\n    font-size: 20px;\r\n    vertical-align: -0.25em;\r\n    transition: transform 0.3s;\r\n    color: unset;\r\n  }\r\n\r\n  .title-icon + .title {\r\n    margin-left: 10px;\r\n  }\r\n\r\n  &:hover > .title-icon,\r\n  .el-sub-menu__title:hover > .title-icon {\r\n    transform: scale(1.2);\r\n  }\r\n}\r\n\r\na {\r\n  cursor: pointer;\r\n  color: inherit;\r\n  text-decoration: none;\r\n}\r\n\r\n.el-sub-menu__title {\r\n  > .badge {\r\n    &-dot {\r\n      right: 40px;\r\n    }\r\n\r\n    &-text {\r\n      right: 40px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\">\r\n.el-menu--inline {\r\n  background-color: var(--g-sub-sidebar-menu-bg) !important;\r\n\r\n  .el-menu-item,\r\n  .el-sub-menu > .el-sub-menu__title {\r\n    color: var(--g-sub-sidebar-menu-color);\r\n    background-color: var(--g-sub-sidebar-menu-bg) !important;\r\n\r\n    &:hover {\r\n      color: var(--g-sub-sidebar-menu-hover-color) !important;\r\n      background-color: var(--g-sub-sidebar-menu-hover-bg) !important;\r\n    }\r\n  }\r\n}\r\n\r\n.el-menu-item,\r\n.el-sub-menu__title {\r\n  color: var(--g-sub-sidebar-menu-color) !important;\r\n  background: transparent !important;\r\n\r\n  &:hover {\r\n    color: var(--g-sub-sidebar-menu-hover-color) !important;\r\n    background-color: var(--g-sub-sidebar-menu-hover-bg) !important;\r\n  }\r\n}\r\n\r\n.el-menu-item.is-active,\r\n.el-menu--collapse .el-sub-menu.is-active > .el-sub-menu__title,\r\n.el-sub-menu .el-menu--inline .el-menu-item.is-active {\r\n  color: var(--g-sub-sidebar-menu-active-color) !important;\r\n  background-color: var(--g-sub-sidebar-menu-active-bg) !important;\r\n\r\n  .icon,\r\n  .el-sub-menu__icon-arrow {\r\n    color: unset;\r\n  }\r\n}\r\n</style>\r\n"],"names":["__default__","defineComponent","settingsStore","useSettingsStore","hasChildren","computed","flag","props","item","_a"],"mappings":"keAEAA,EAAAC,EAAA,CAA+B,KAAA,aAE/B,CAAA,wGAmBAC,EAAAC,IAEAC,EAAAC,EAAA,IAAA,CACE,IAAAC,EAAA,GACA,OAAAC,EAAA,KAAA,SACEA,EAAA,KAAA,SAAA,MAAAC,GAAA,OAAA,QAAAC,EAAAD,EAAA,OAAA,YAAAC,EAAA,WAAA,GAAA,IACEH,EAAA,IAIFA,EAAA,GAEFA,CAAO,CAAA"}